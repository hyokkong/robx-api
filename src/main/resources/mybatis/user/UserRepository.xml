<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rbox.user.adapter.out.persistence.repository.UserRepository">
  <resultMap id="UserMap" type="com.rbox.user.adapter.out.persistence.repository.UserEntity">
    <constructor>
      <idArg column="usr_id" javaType="java.lang.Long" />
      <arg column="email" javaType="java.lang.String" />
      <arg column="nick" javaType="java.lang.String" />
      <arg column="stat_cd" javaType="java.lang.String" />
      <arg column="pwd" javaType="java.lang.String" />
    </constructor>
  </resultMap>

  <!-- 이메일로 사용자 조회 -->
  <select id="findByEmail" parameterType="string" resultMap="UserMap">
    SELECT usr_id, email, nick, stat_cd, pwd
    FROM tb_usr
    WHERE email = #{email}
  </select>

  <!-- ID로 사용자 조회 -->
  <select id="findById" parameterType="long" resultMap="UserMap">
    SELECT usr_id, email, nick, stat_cd, pwd
    FROM tb_usr
    WHERE usr_id = #{id}
  </select>
</mapper>
