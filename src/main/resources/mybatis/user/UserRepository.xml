<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rbox.user.adapter.out.persistence.repository.UserRepository">
  <resultMap id="UserMap" type="com.rbox.user.adapter.out.persistence.repository.UserEntity">
    <id property="id" column="usr_id" />
    <result property="email" column="email" />
    <result property="nick" column="nick" />
    <result property="stat" column="stat_cd" />
    <result property="password" column="pwd" />
  </resultMap>

  <!-- 이메일로 사용자 조회 -->
  <select id="findByEmail" parameterType="string" resultMap="UserMap">
    SELECT usr_id, email, nick, stat_cd, pwd
    FROM tb_usr
    WHERE email = #{email}
  </select>

  <!-- ID로 사용자 조회 -->
  <select id="findById" parameterType="long" resultMap="UserMap">
    SELECT usr_id, email, nick, stat_cd, pwd
    FROM tb_usr
    WHERE usr_id = #{id}
  </select>
</mapper>
